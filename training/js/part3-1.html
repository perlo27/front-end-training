<!DOCTYPE HTML>
<html>
  <head>
  </head>
  <body>


  <style>
  </style>

  <script>
    "use strict";

    function loadScript(src, callback) {
      let script = document.createElement('script');
      script.src = src;

      script.onload = () => callback(null, script);
      script.onerror = () => callback(new Error("Failed ot load " + src));

      document.head.append(script);
    }

    // correct result
    loadScript("./part3test.js", function(error, script) {
      if (error) {
        console.log("Error: " + error);
      } else {
        console.log("Loaded: " + script);
      }
    });

    // error
    loadScript("/some/path", function(error, script) {
      if (error) {
        console.log("Error: " + error);
      } else {
        console.log("Loaded: " + script);
      }
    });


    // Promise
    let promise = new Promise(function(resolve, reject) {
      setTimeout(() => resolve("done!"), 1000);
    });

    promise.then(
      result => console.log("Promise result: " + result),
      error => console.log("Promise error: " + error)
    );


    // Promise tasks
    let promiseTask = new Promise(function(resolve, reject) {
      resolve(1);
      setTimeout(() => resolve(2), 1000); // this is ignored
    });
    promiseTask.then(console.log);

    function delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }
    delay(3000).then(() => console.log('runs after 3 seconds'));

    new Promise(function(resolve, reject) {
      setTimeout(() => {throw new Error("Whoops!")}, 1000);
    }).catch(console.log);

  </script>


  </body>
</html>